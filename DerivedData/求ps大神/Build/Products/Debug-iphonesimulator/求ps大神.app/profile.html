<html>
    <head>
        <meta name = "viewport" content = "initial-scale = 1.0, user-scalable = no" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
               <script type="text/javascript" src="NKit.js"></script>
           </head>
    <body>
        <form id="reg" >
			<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
                <label for="username" class="ui-input-text">用户名:</label>
                <input id="username" name="username" class="ui-input-text ui-body-null ui-corner-all ui-shadow-inset ui-body-c">
             </div>
            
			<div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
                <label for="password" class="ui-input-text">密码:</label>
                <input type="password" id="password" name="password" class="ui-input-text ui-body-null ui-corner-all ui-shadow-inset ui-body-c">
             </div>
            
            <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
                <label for="retype" class="ui-input-text">确认密码:</label>
                <input type="password" id="retype" name="retype" class="ui-input-text ui-body-null ui-corner-all ui-shadow-inset ui-body-c">
                    </div>
            
            <button class="ui-btn-up-c" onclick="return signin();" id="regsubmit" type="submit">注册</button>
            <p>我已经有帐号，<button class="ui-link" href="#" onClick="navController.gotoPage('signin.html')">登录</button></p>
        </form>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile.structure-1.3.0.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>

        <script>
            var navController = new NKNavigationController();
            navController.setTitle("个人中心");
            navController.setTintColor(150, 100, 100);
            /**
             * 用户注册
             * @returns {false}
             */
            function signin()
            {
                var username = $('#username').val();
                var password = $('#password').val();
                var retype   = $('#retype').val();
                if((username!="")&&(password!="")&&(retype!="")&&(password==retype)){
                    $.post("http://172.31.203.104:8088/ios/reg",
                           {
                           'username': $('#username').val(),
                           'password': $('#password').val(),
                           'retype'  : $('#retype').val()
                           },
                           function(data){
                           if(data.status==1){
                           NKAlert("",data.message);
                           navController.gotoPage('signin.html')
                           }else{ NKAlert("","系统打瞌睡。。");}
                           },'json');
                    
                } else if(username==""){
                    NKAlert("", '请输入用户名');
                } else if(password==""){
                    NKAlert("", '请输入密码');
                } else if(retype==""){
                    NKAlert("", '请输入确认密码');
                } else if(retype!=password){
                   NKAlert("", '确认密码 和 密码不一致');
                }
                
                return false;
            }
            </script>

    </body>
</html>